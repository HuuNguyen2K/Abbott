<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Presentation</title>
  </head>
  <body>
    <body>
      <div id="container">
        <video width="500" id="video">
          <source
            src="https://media.w3.org/2010/05/sintel/trailer_hd.mp4"
            type="video/mp4"
          />
        </video>
        <div>
          <button id="vn">Vn</button>
          <button id="en">En</button>
        </div>
        <!-- <div id="survey">Đánh giá</div> -->
        <!-- <iframe
          src="https://docs.google.com/forms/d/e/1FAIpQLSdV2Uz1sbnT9NAcY-S0vdqXfX2dzIZw4ihe0HDxMGWrtRI-xQ/viewform?usp=sf_link"
          width="1000"
          height="500"
        ></iframe> -->

        <select name="name">
          <option selected value="1">PGS.TS.BS Trần Minh Trân</option>
          <option value="2">PGS.TS.BS Lương Lê</option>
          <option value="3">PGS.TS.BS Lê Nhựt Hào</option>
        </select>
        <button id="send-question">Gửi Câu Hỏi</button>
        <textarea name="content" id="content" cols="30" rows="10"></textarea>
        <select id="language" name="language">
          <option selected value="vn">Tiếng Việt</option>
          <option value="en">English</option>
        </select>
      </div>
      <script>
        const survey = document.getElementById('survey')
        const video = document.querySelector('#video')
        const vn = document.querySelector('#vn')
        const en = document.querySelector('#en')
        let second = 0
        let timer = null

        window.onload = () => {
          console.log('load')
          const search = window.location.search
          let lang = 'vn'
          if (search) {
            lang = search.slice(-2)
          }

          if (lang === 'vn') vn.click()
          if (lang === 'en') en.click()
        }

        // survey.addEventListener('click', () => {
        //   const iF = document.createElement('iframe')
        //   iF.setAttribute('width', '1000')
        //   iF.setAttribute('height', '500')
        //   iF.setAttribute(
        //     'src',
        //     'https://docs.google.com/forms/d/e/1FAIpQLSdV2Uz1sbnT9NAcY-S0vdqXfX2dzIZw4ihe0HDxMGWrtRI-xQ/viewform?usp=sf_link'
        //   )
        //   survey.appendChild(iF)
        // })

        const getLength = () => video.duration

        const switchSrc = (lang = 'vn') => {
          const length = getLength()

          const source = video.querySelector('source')

          if (lang === 'vn') {
            source.setAttribute(
              'src',
              'https://media.w3.org/2010/05/sintel/trailer_hd.mp4'
            )
          }

          if (lang === 'en') {
            source.setAttribute(
              'src',
              'https://media.w3.org/2010/05/sintel/trailer_hd.mp4'
            )
          }

          video.load()
          video.play()

          if (timer) {
            video.addEventListener('loadedmetadata', () => {
              video.currentTime = second
            })
          } else {
            timer = setInterval(() => {
              if (second >= length) {
                clearInterval(timer)
                video.pause()
              } else second = second + 1
              console.log(second)
            }, 1000)
          }
        }

        vn.addEventListener('click', () => switchSrc('vn'))
        en.addEventListener('click', () => switchSrc('en'))
      </script>
    </body>
  </body>
</html>
